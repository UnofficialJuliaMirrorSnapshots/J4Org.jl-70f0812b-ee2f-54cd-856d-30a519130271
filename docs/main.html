<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-07-16 Mon 18:43 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Package Documentation</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Vincent Picaud" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://orgmode.org/worg/style/worg.css"/>
<style type="text/css">body{ max-width:80%; }</style>
<style type="text/css"> blockquote {background:#EEEEEE; padding: 3px 13px}    </style>
<style type="text/css"> pre {background:#EEEEEE; padding: 3px 13px}    </style>
<style type="text/css"> blockquote {background:#EEEEEE; padding: 3px 13px}    </style>
<style type="text/css"> pre {background:#EEEEEE; padding: 3px 13px}    </style>
<script type="text/javascript" src="http://orgmode.org/org-info.js">
/**
 *
 * @source: http://orgmode.org/org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in http://orgmode.org/org-info.js.
 *
 * Copyright (C) 2012-2017 Free Software Foundation, Inc.
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in http://orgmode.org/org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2017 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "3");
org_html_manager.set("LINK_HOME", "index.html");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "1");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "1");
org_html_manager.set("VIEW", "showall");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2017 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">Package Documentation</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org0d56e4c">1. Introduction</a>
<ul>
<li><a href="#org497ee04">1.1. Minimal requirements</a></li>
<li><a href="#orgf5f553a">1.2. Getting started with a minimal example</a>
<ul>
<li><a href="#orgca75a28">1.2.1. Emacs configuration</a></li>
<li><a href="#org97ef136">1.2.2. A documented Julia <code>Foo</code> module</a></li>
<li><a href="#org2d1e862">1.2.3. Minimal OrgMode document</a></li>
<li><a href="#org4c270d4">1.2.4. Generating the doc</a></li>
<li><a href="#orgbc8e7a5">1.2.5. Improving exported document style</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org60c084f">2. More examples</a>
<ul>
<li><a href="#orgf5d80aa">2.1. <code>print_org_doc</code> options</a>
<ul>
<li><a href="#org0b15fc3">2.1.1. <code>header_level</code></a></li>
<li><a href="#orged22a29">2.1.2. <code>tag</code>, <code>tag_to_ignore</code>, <code>identifier</code></a></li>
<li><a href="#orge7fd708">2.1.3. <code>complete_link</code></a></li>
<li><a href="#org6a5007c">2.1.4. <code>link_prefix</code></a></li>
<li><a href="#orgdf721a0">2.1.5. <code>case_sensitive</code></a></li>
<li><a href="#orgb8a5683">2.1.6. <code>boxingModule</code></a></li>
</ul>
</li>
<li><a href="#org2f0d971">2.2. Error reporting</a></li>
<li><a href="#org6715593">2.3. Compatibility with docstring / documenter.jl</a></li>
</ul>
</li>
<li><a href="#org8cf3a45">3. API</a></li>
<li><a href="#org9a6644d">4. Unit tests</a></li>
<li><a href="#orgf2cdc6e">5. Code/Design tips</a>
<ul>
<li><a href="#org0478ddd">5.1. PDF export &amp; phantomsection</a></li>
<li><a href="#org6eb6c91">5.2. HTML export with background</a></li>
<li><a href="#orgd7bc743">5.3. Steps to add a new item</a>
<ul>
<li><a href="#org6edb9f4">5.3.1. <code>tokenizer.jl</code> file</a></li>
<li><a href="#orgf90ab09">5.3.2. <code>extract.jl</code> file</a></li>
<li><a href="#org63620d8">5.3.3. <code>link.jl</code> file</a></li>
<li><a href="#org903f4fa">5.3.4. <code>documented_item.jl</code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org0d56e4c" class="outline-2">
<h2 id="org0d56e4c"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
J4Org.jl is a Julia package that allows Julia doc generation into an
Org-Mode document. The goal is to be able to code and document Julia
packages without leaving Emacs and to reduce as much as possible the
burden of documentation. This package depends on <a href="https://github.com/KristofferC/Tokenize.jl/">Tokenize.jl</a>, to
tokenize Julia code.
</p>
</div>

<div id="outline-container-org497ee04" class="outline-3">
<h3 id="org497ee04"><span class="section-number-3">1.1</span> Minimal requirements</h3>
<div class="outline-text-3" id="text-1-1">
<p>
You need <a href="https://orgmode.org/">Org-Mode</a> plus <a href="https://github.com/gjkerns/ob-julia/blob/master/ob-julia-doc.org">ob-julia.el</a>, which has <a href="http://stat.ethz.ch/ESS/index.php?Section=download">ESS</a> as dependence, to be
installed.
</p>
</div>
</div>

<div id="outline-container-orgf5f553a" class="outline-3">
<h3 id="orgf5f553a"><span class="section-number-3">1.2</span> Getting started with a minimal example</h3>
<div class="outline-text-3" id="text-1-2">
<p>
The following is a minimal example you can reproduce to have a taste
of what this package do.
</p>
</div>

<div id="outline-container-orgca75a28" class="outline-4">
<h4 id="orgca75a28"><span class="section-number-4">1.2.1</span> Emacs configuration</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
You first need a minimal <code>init.el</code> file to configure Emacs.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(package-initialize)

(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">ess-site</span>)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">if required</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq  inferior-julia-program-name "/path/to/julia-release-basic")</span>

(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">org</span>)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">*replace me* with your own ob-julia.el file location </span>
(add-to-list 'load-path <span style="color: #8b2252;">"~/GitLab/WorkingWithOrgMode/EmacsFiles"</span>)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">babel configuration</span>
(<span style="color: #a020f0;">setq</span> org-confirm-babel-evaluate nil)
(org-babel-do-load-languages
 'org-babel-load-languages
 '((julia . t)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org97ef136" class="outline-4">
<h4 id="org97ef136"><a id="ID-2ae4bb8f-17f2-4cb7-9fba-eff22bea6a92"></a><span class="section-number-4">1.2.2</span> A documented Julia <code>Foo</code> module</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
Then you need a documented module:
</p>

<div class="org-src-container">
<pre class="src src-julia"><span style="color: #a020f0;">module</span> Foo

<span style="color: #a020f0;">export</span> Point, foo
    
<span style="color: #a020f0;">import</span> Base: norm

<span style="color: #b22222;">#</span><span style="color: #b22222;">+Point L:Point_struct</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">This is my Point structure</span>
<span style="color: #b22222;">#</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">*Example:*</span>
<span style="color: #b22222;">#</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">Creates a point $p$ of coordinates $(x=1,y=2)$.</span>
<span style="color: #b22222;">#</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">#+BEGIN_SRC julia :eval never :exports code</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">p=Point(1,2)</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">#+END_SRC</span>
<span style="color: #b22222;">#</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">You can add any valid Org mode directive. If you want to use</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">in-documentation link, use [[norm_link_example][]]</span>
<span style="color: #b22222;">#</span>
<span style="color: #a020f0;">struct</span> <span style="color: #228b22;">Point</span>
    x::<span style="color: #228b22;">Float64</span>
    y::<span style="color: #228b22;">Float64</span>
<span style="color: #a020f0;">end</span>

<span style="color: #b22222;">#</span><span style="color: #b22222;">+Point</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">Creates Point at origin $(0,0)$ </span>
<span style="color: #0000ff;">Point</span>() = Point(0,0)

<span style="color: #b22222;">#</span><span style="color: #b22222;">+Enum</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">An enum</span>
<span style="color: #483d8b;">@enum</span> Alpha A=1 B C <span style="color: #b22222;"># </span><span style="color: #b22222;">just for example</span>

<span style="color: #b22222;">#</span><span style="color: #b22222;">+Point,Method L:norm_link_example</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">A simple function that computes $\sqrt{x^2+y^2}$</span>
<span style="color: #b22222;">#</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">*Example:*</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">!p=Point(1.0,2.0);</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">!norm(p) </span>
<span style="color: #b22222;">#</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">See: [[Point_struct][]]</span>
<span style="color: #b22222;">#</span>
<span style="color: #0000ff;">norm</span>(p::<span style="color: #228b22;">Point</span>)::<span style="color: #228b22;">Float64</span> = sqrt(p.x*p.x+p.y*p.y)

<span style="color: #b22222;"># </span><span style="color: #b22222;">+Method,Internal</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">An internal function</span>
<span style="color: #b22222;">#</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">For symbol that are not exported, do not forget the "Foo." prefix:</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">!p=Point(1.0,2.0)</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">!Foo.foo(2.0,p)</span>
<span style="color: #0000ff;">foo</span>(r::<span style="color: #228b22;">Float64</span>,p::<span style="color: #228b22;">Point</span>) = Point(r*p.x,r*p.y)

<span style="color: #a020f0;">end</span> 
</pre>
</div>

<p>
I wanted to reduce the documentation process as much as possible. The
template is very simple. Before each item you want to document add
these comment lines:
</p>

<div class="org-src-container">
<pre class="src src-julia"><span style="color: #b22222;">#</span><span style="color: #b22222;">+Tag1,Tag2,... L:an_extra_link_if_required </span>
<span style="color: #b22222;">#</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">Here you can put any Org mode text, for instance $sin(x)$</span>
<span style="color: #b22222;">#</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">!sin(5) # julia code to be executed</span>
<span style="color: #b22222;">#</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">[[internal_link][]]</span>
<span style="color: #a020f0;">struct</span> <span style="color: #228b22;">A_Documented_Struct</span> 
...
<span style="color: #a020f0;">end</span> 
</pre>
</div>

<ul class="org-ul">
<li><b>#+Tag1,Tag2,&#x2026;</b> is mandatory, "#+" is followed by a list of
tags. Later when you want to extract doc you can do filtering
according these tags.</li>

<li><b>L:an_extra_link_if_required</b> is <b>not</b> mandatory. It defines a
reference if you want to create doc links. The previous statement
defines a link <b>target</b> named <code>an_extra_link_if_required</code>.</li>

<li><b>[[internal_link][]]</b> creates a link to a previously defined
<b>L:internal_link</b>.</li>

<li><b>!sin(5)</b> will execute Julia code and include the output in the
doc. If you only want to include Julia code without executing it,
simply use Org mode source block:</li>
</ul>
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #b22222;"># </span><span style="color: #b22222;">#+BEGIN_SRC julia :eval never :exports code</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">sin(5)</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">#+END_SRC</span>
</pre>
</div>
</div>

<ol class="org-ol">
<li><a id="org9a1fee6"></a>Support for "# +" and "# !" (since v0.2.0)<br />
<div class="outline-text-5" id="text-1-2-2-1">
<p>
As you can see (foo() function comments), "# +", "#+" and "#
!", "#!" are synonyms.  The motivation is a better integration with
<a href="https://github.com/QBobWatson/poporg">poporg</a> Emacs package.  With this Emacs package you can edit comment
under OrgMode mode without being bothered by the "#" characters.
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-org2d1e862" class="outline-4">
<h4 id="org2d1e862"><span class="section-number-4">1.2.3</span> Minimal OrgMode document</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
This is the <code>foo.org</code> file.
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="color: #b22222;">#+PROPERTY: header-args:julia :session *my_session* :exports code :eval no-export</span>
<span style="color: #b22222;">#+OPTIONS: ^:{}</span>
<span style="color: #7f7f7f;">#+TITLE:</span> <span style="color: #191970; font-weight: bold;">Getting Started with a minimal example</span>

<span style="color: #b22222;">#+BEGIN_SRC julia :results output none :eval no-export :exports none</span>
<span style="color: #7f7f7f;">push!(LOAD_PATH,pwd())</span>
<span style="color: #b22222;">#+END_SRC</span>

<span style="color: #b22222;">#+BEGIN_SRC julia :results output none :eval no-export :exports none</span>
<span style="color: #a020f0;">using</span><span style="color: #7f7f7f;"> J4Org </span>
<span style="color: #7f7f7f;">initialize_boxing_module(usedModules=[</span><span style="color: #8b2252;">"Foo"</span><span style="color: #7f7f7f;">]) </span>
<span style="color: #7f7f7f;">documented_items=create_documented_item_array(</span><span style="color: #8b2252;">"Foo.jl"</span><span style="color: #7f7f7f;">)</span>
<span style="color: #b22222;">#+END_SRC</span>

<span style="color: #0000ff;">* Example</span>

Prints all documented items, except those tagged with "Internal" 
<span style="color: #b22222;">#+BEGIN_SRC julia :results output drawer :eval no-export :exports results</span>
<span style="color: #7f7f7f;">print_org_doc(documented_items,tag_to_ignore=[</span><span style="color: #8b2252;">"Internal"</span><span style="color: #7f7f7f;">],header_level=0)</span>
<span style="color: #b22222;">#+END_SRC</span>
</pre>
</div>


<ul class="org-ul">
<li><b>push!(LOAD_PATH,pwd())</b> tells Julia where it can find our local <code>Foo</code>
module. This statement is only required if the documented module is
in an unusual place.</li>

<li><b>using J4Org</b> uses this package</li>

<li><b>initialize_boxing_module(usedModules=["Foo"])</b> defines what are
the modules to use when executing Julia code extracted from the doc
(the "#!" statements). Here we are documenting the <code>Foo</code> module,
hence we must use it. Note that you can also use any number of extra
modules for instance with <code>["Foo", "ExtraModule", ...]</code>. See
<a href="#orgb7e8da9">initialize_boxing_module(&#x2026;)</a> for further details.</li>

<li><b>create_documented_item_array("Foo.jl")</b> creates the list of
documented items from file "Foo.jl". You can use a list of files and
a directory, see <a href="#org04e479d">create_documented_item_array(&#x2026;)</a> for further details.</li>

<li><b>print_org_doc(documented_items,tag_to_ignore=["Internal"],header_level=0)</b>
prints all documented items, except those tagged with "Internal",
see <a href="#org62c826a">print_org_doc(&#x2026;)</a> for further details</li>
</ul>
</div>
</div>

<div id="outline-container-org4c270d4" class="outline-4">
<h4 id="org4c270d4"><span class="section-number-4">1.2.4</span> Generating the doc</h4>
<div class="outline-text-4" id="text-1-2-4">
<p>
To check that it works you can start a fresh emacs with
</p>

<div class="org-src-container">
<pre class="src src-bash">emacs -q --load init.el foo.org &amp;
</pre>
</div>

<p>
then type:
</p>
<ul class="org-ul">
<li><code>C-c C-v b</code> + <code>RET</code> to execute all source code blocks</li>
<li><code>C-c C-e h o</code> to html-export the file</li>
<li><code>C-c C-e l o</code> to pdf-export the file</li>
</ul>

<p>
You should get this <a href="minimal_example/foo.html">minimal_example/foo.html</a> file.
</p>
</div>
</div>

<div id="outline-container-orgbc8e7a5" class="outline-4">
<h4 id="orgbc8e7a5"><span class="section-number-4">1.2.5</span> Improving exported document style</h4>
<div class="outline-text-4" id="text-1-2-5">
<p>
This was a minimal example, you can have a better look for the
exported documents by including css theme, etc. This is the approach
we used to generate <b>this</b> document (also see the <a href="main.pdf">main.pdf</a> PDF file).
Another example is <a href="https://vincent-picaud.github.io/DirectConvolution.jl/docs.html">DirectConvolution.jl documentation</a>. 
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org60c084f" class="outline-2">
<h2 id="org60c084f"><span class="section-number-2">2</span> More examples</h2>
<div class="outline-text-2" id="text-2">
<p>
We still use our <a href="#org97ef136"><code>Foo</code></a> module to provide more examples. The complete <a href="#org8cf3a45">API</a> is detailed after.
</p>
</div>

<div id="outline-container-orgf5d80aa" class="outline-3">
<h3 id="orgf5d80aa"><span class="section-number-3">2.1</span> <code>print_org_doc</code> options</h3>
<div class="outline-text-3" id="text-2-1">
<p>
The <a href="#org62c826a">print_org_doc(&#x2026;)</a> function has several options, let's see some usage examples
</p>
</div>

<div id="outline-container-org0b15fc3" class="outline-4">
<h4 id="org0b15fc3"><span class="section-number-4">2.1.1</span> <code>header_level</code></h4>
<div class="outline-text-4" id="text-2-1-1">
<p>
This integer can have these values:
</p>
<ul class="org-ul">
<li><b>-1</b>: do not print header nor index, see <a href="#orgdc5ed1c">header_level=-1</a></li>
<li><b>0</b>: print header beginning with "-", see <a href="#org8b71e18">header_level=0</a>.</li>
<li><b>l&gt;0</b> create subsection of level <b>l</b>, for instance <b>header_level=3</b>
creates subsections beginning with <b>3</b> stars. See
<a href="#org7e53a11">header_level=5</a>. <b>Caveat:</b> for <b>l&gt;0</b> AFAIK there is a bug in OrgMode,
because a residual <b>:RESULT:</b> is printed.</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="orgdc5ed1c"></a><a id="ID-bda53362-32fb-4096-9c0a-32c0afb96b5f"></a>header_level=-1<br />
<div class="outline-text-5" id="text-2-1-1-1">
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #b22222;">#</span><span style="color: #b22222;">+BEGIN_SRC julia :results output drawer :eval no-export :exports results </span>
documented_items=create_documented_item_array(<span style="color: #8b2252;">"minimal_example/Foo.jl"</span>);
print_org_doc(documented_items,tag=<span style="color: #8b2252;">"Method"</span>,header_level=-1,with_body=<span style="color: #008b8b;">true</span>)
<span style="color: #b22222;">#</span><span style="color: #b22222;">+END_SRC</span>
</pre>
</div>

<p>
This will generate (here <code>with_body=true</code> this mean that we also
extract code body).
</p>

<p>

</p>


<div class="org-src-container">
<pre class="src src-julia"><span style="color: #0000ff;">foo</span>(r::<span style="color: #228b22;">Float64</span>,p::<span style="color: #228b22;">Point</span>) = Point(r*p.x,r*p.y)
</pre>
</div>
<blockquote>
<p>
An internal function
</p>

<p>
For symbol that are not exported, do not forget the "Foo." prefix:
</p>
<div class="org-src-container">
<pre class="src src-julia">p=Point(1.0,2.0)
Foo.foo(2.0,p)
</pre>
</div>
<div class="org-src-container">
<pre class="src src-julia">Foo.Point(1.0, 2.0)
Foo.Point(2.0, 4.0)
</pre>
</div>
</blockquote>
<p>
<a href="minimal_example/Foo.jl#org36ddd5d">Foo.jl:46</a>
   <a id="org2b20895"></a>
</p>
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #0000ff;">norm</span>(p::<span style="color: #228b22;">Point</span>)::<span style="color: #228b22;">Float64</span> = sqrt(p.x*p.x+p.y*p.y
</pre>
</div>
<blockquote>
<p>
A simple function that computes \(\sqrt{x^2+y^2}\)
</p>

<p>
<b>Example:</b>
</p>
<div class="org-src-container">
<pre class="src src-julia">p=Point(1.0,2.0);
norm(p) 
</pre>
</div>
<div class="org-src-container">
<pre class="src src-julia">2.23606797749979
</pre>
</div>

<p>
See: <span class="underline">struct Point</span>
</p>
</blockquote>
<p>
<a href="minimal_example/Foo.jl#org73ccc2c">Foo.jl:35</a>
</p>
</div>
</li>



<li><a id="org8b71e18"></a><a id="ID-842e5c47-62d1-44fc-8489-e105a45f5dd4"></a>header_level=0<br />
<div class="outline-text-5" id="text-2-1-1-2">
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #b22222;">#</span><span style="color: #b22222;">+BEGIN_SRC julia :results output drawer :eval no-export :exports results</span>
documented_items=create_documented_item_array(<span style="color: #8b2252;">"minimal_example/Foo.jl"</span>);
print_org_doc(documented_items,tag=<span style="color: #8b2252;">"Method"</span>,header_level=0)
<span style="color: #b22222;">#</span><span style="color: #b22222;">+END_SRC</span>
</pre>
</div>

<p>
This will generate:
</p>

<p>
2.23606797749979
</p>


<p>
<a id="orge47fc66"></a> <b>Index:</b> <b>[f]</b> <a href="#org0941979">foo</a> <b>[n]</b> <a href="#orgf8fefab">norm</a> 
</p>
<ul class="org-ul">
<li><b><code>foo</code></b>  <a id="org0941979"></a></li>
</ul>
<div class="org-src-container">
<pre class="src src-julia">foo(r::<span style="color: #228b22;">Float64</span>,p::<span style="color: #228b22;">Point</span>)
</pre>
</div>
<blockquote>
<p>
An internal function
</p>

<p>
For symbol that are not exported, do not forget the "Foo." prefix:
</p>
<div class="org-src-container">
<pre class="src src-julia">p=Point(1.0,2.0)
Foo.foo(2.0,p)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-julia">Foo.Point(1.0, 2.0)
Foo.Point(2.0, 4.0)
</pre>
</div>
</blockquote>
<p>
<a href="minimal_example/Foo.jl#org36ddd5d">Foo.jl:46</a>, <a href="#orge47fc66">back to index</a>
</p>
<ul class="org-ul">
<li><b><code>norm</code></b>  <a id="orgf8fefab"></a> <a id="orgbad5bce"></a></li>
</ul>
<div class="org-src-container">
<pre class="src src-julia">norm(p::<span style="color: #228b22;">Point</span>)::<span style="color: #228b22;">Float64</span>
</pre>
</div>
<blockquote>
<p>
A simple function that computes \(\sqrt{x^2+y^2}\)
</p>

<p>
<b>Example:</b>
</p>
<div class="org-src-container">
<pre class="src src-julia">p=Point(1.0,2.0);
norm(p) 
</pre>
</div>

<div class="org-src-container">
<pre class="src src-julia">2.23606797749979
</pre>
</div>

<p>
See: <span class="underline">struct Point</span>
</p>
</blockquote>
<p>
<a href="minimal_example/Foo.jl#org73ccc2c">Foo.jl:35</a>, <a href="#orge47fc66">back to index</a>
</p>
</div>
</li>



<li><a id="org7e53a11"></a><a id="ID-0f6a49dc-ee9f-4964-8801-8badfb67f735"></a>header_level=5<br />
<div class="outline-text-5" id="text-2-1-1-3">
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #b22222;">#</span><span style="color: #b22222;">+BEGIN_SRC julia :results output drawer :eval no-export :exports results</span>
documented_items=create_documented_item_array(<span style="color: #8b2252;">"minimal_example/Foo.jl"</span>);
print_org_doc(documented_items,tag=<span style="color: #8b2252;">"Method"</span>,header_level=5)
<span style="color: #b22222;">#</span><span style="color: #b22222;">+END_SRC</span>
</pre>
</div>

<p>
This will generate:
</p>

<p>
:RESULTS:
</p>

<p>
<a id="org5b599e9"></a> <b>Index:</b> <b>[f]</b> <a href="#org9105943">foo</a> <b>[n]</b> <a href="#org4cb15ed">norm</a> 
</p>
</div>
<ol class="org-ol">
<li><a id="orgd1593a5"></a><b><code>foo</code></b>  <a id="org9105943"></a><br />
<div class="outline-text-6" id="text-2-1-1-3-1">
<div class="org-src-container">
<pre class="src src-julia">foo(r::<span style="color: #228b22;">Float64</span>,p::<span style="color: #228b22;">Point</span>)
</pre>
</div>
<blockquote>
<p>
An internal function
</p>

<p>
For symbol that are not exported, do not forget the "Foo." prefix:
</p>
<div class="org-src-container">
<pre class="src src-julia">p=Point(1.0,2.0)
Foo.foo(2.0,p)
</pre>
</div>
<div class="org-src-container">
<pre class="src src-julia">Foo.Point(1.0, 2.0)
Foo.Point(2.0, 4.0)
</pre>
</div>
</blockquote>
<p>
<a href="minimal_example/Foo.jl#org36ddd5d">Foo.jl:46</a>, <a href="#org5b599e9">back to index</a>
</p>
</div>
</li>
<li><a id="org59b7a37"></a><b><code>norm</code></b>  <a id="org4cb15ed"></a> <a id="org6e087e1"></a><br />
<div class="outline-text-6" id="text-2-1-1-3-2">
<div class="org-src-container">
<pre class="src src-julia">norm(p::<span style="color: #228b22;">Point</span>)::<span style="color: #228b22;">Float64</span>
</pre>
</div>
<blockquote>
<p>
A simple function that computes \(\sqrt{x^2+y^2}\)
</p>

<p>
<b>Example:</b>
</p>
<div class="org-src-container">
<pre class="src src-julia">p=Point(1.0,2.0);
norm(p) 
</pre>
</div>
<div class="org-src-container">
<pre class="src src-julia">2.23606797749979
</pre>
</div>

<p>
See: <span class="underline">struct Point</span>
</p>
</blockquote>
<p>
<a href="minimal_example/Foo.jl#org73ccc2c">Foo.jl:35</a>, <a href="#org5b599e9">back to index</a>
</p>
</div>
</li>
</ol>
</li>
</ol>
</div>

<div id="outline-container-orged22a29" class="outline-4">
<h4 id="orged22a29"><a id="ID-0e085bd4-7c99-44d6-8220-3e397fff8458"></a><span class="section-number-4">2.1.2</span> <code>tag</code>, <code>tag_to_ignore</code>, <code>identifier</code></h4>
<div class="outline-text-4" id="text-2-1-2">
<p>
These options allow to select items to include:
</p>

<ul class="org-ul">
<li><code>tag</code> a string or an array of strings, collects all items with at least one tag in this <code>tag</code> option.</li>
<li><code>tag_to_ignore</code> a string or an array of strings, ignore all items with at least one tag in this <code>tag_to_ignore</code> option.</li>
<li><code>identifier</code> a string that stands for the structure, abstract type or function name. Collects all items with this <code>identifier</code> name.</li>
</ul>

<p>
For instance we can print <code>norm</code> identifier, restricted to <code>Point</code> tag, as follows:
</p>

<div class="org-src-container">
<pre class="src src-julia"><span style="color: #b22222;">#</span><span style="color: #b22222;">+BEGIN_SRC julia :results output drawer :eval no-export :exports results</span>
documented_items=create_documented_item_array(<span style="color: #8b2252;">"minimal_example/Foo.jl"</span>);
print_org_doc(documented_items,identifier=<span style="color: #8b2252;">"norm"</span>, tag=<span style="color: #8b2252;">"Point"</span>,header_level=-1)
<span style="color: #b22222;">#</span><span style="color: #b22222;">+END_SRC</span>
</pre>
</div>

<p>
This will generate:
</p>

<p>

</p>

<p>
  <a id="org361a8fd"></a>
</p>
<div class="org-src-container">
<pre class="src src-julia">norm(p::<span style="color: #228b22;">Point</span>)::<span style="color: #228b22;">Float64</span>
</pre>
</div>
<blockquote>
<p>
A simple function that computes \(\sqrt{x^2+y^2}\)
</p>

<p>
<b>Example:</b>
</p>
<div class="org-src-container">
<pre class="src src-julia">p=Point(1.0,2.0);
norm(p) 
</pre>
</div>
<div class="org-src-container">
<pre class="src src-julia">2.23606797749979
</pre>
</div>

<p>
See: <span class="underline">struct Point</span>
</p>
</blockquote>
<p>
<a href="minimal_example/Foo.jl#org73ccc2c">Foo.jl:35</a>
</p>
</div>
</div>

<div id="outline-container-orge7fd708" class="outline-4">
<h4 id="orge7fd708"><span class="section-number-4">2.1.3</span> <code>complete_link</code></h4>
<div class="outline-text-4" id="text-2-1-3">
<p>
If you look back at <a href="#orged22a29"><code>tag</code>, <code>tag_to_ignore</code>, <code>identifier</code></a> you can see,
at the end of the <code>norm</code> function documentation, that the
<span class="underline">Point_struct</span> link is not active. The reason is that the <code>Point</code>
structure is not present. The <code>complete_link</code> option, if set to <code>true</code>
will try to fix all dangling links by including all the required
documented items. For instance, with:
</p>

<div class="org-src-container">
<pre class="src src-julia"><span style="color: #b22222;">#</span><span style="color: #b22222;">+BEGIN_SRC julia :results output drawer :eval no-export :exports results</span>
documented_items=create_documented_item_array(<span style="color: #8b2252;">"minimal_example/Foo.jl"</span>);
print_org_doc(documented_items,identifier=<span style="color: #8b2252;">"norm"</span>, tag=<span style="color: #8b2252;">"Point"</span>,header_level=-1,
              complete_link=<span style="color: #008b8b;">true</span>)
<span style="color: #b22222;">#</span><span style="color: #b22222;">+END_SRC</span>
</pre>
</div>

<p>
This will generate:
</p>

<p>

</p>

<p>
  <a id="org1420c88"></a>
</p>
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #a020f0;">struct</span> <span style="color: #228b22;">Point</span>
</pre>
</div>
<blockquote>
<p>
This is my Point structure
</p>

<p>
<b>Example:</b>
</p>

<p>
Creates a point \(p\) of coordinates \((x=1,y=2)\).
</p>

<div class="org-src-container">
<pre class="src src-julia">p=Point(1,2)
</pre>
</div>

<p>
You can add any valid Org mode directive. If you want to use
in-documentation link, use <a href="#orgcfdfbe8">norm(&#x2026;)</a>
</p>
</blockquote>
<p>
<a href="minimal_example/Foo.jl#orgec0a9dd">Foo.jl:8</a>
   <a id="orgcfdfbe8"></a>
</p>
<div class="org-src-container">
<pre class="src src-julia">norm(p::<span style="color: #228b22;">Point</span>)::<span style="color: #228b22;">Float64</span>
</pre>
</div>
<blockquote>
<p>
A simple function that computes \(\sqrt{x^2+y^2}\)
</p>

<p>
<b>Example:</b>
</p>
<div class="org-src-container">
<pre class="src src-julia">p=Point(1.0,2.0);
norm(p) 
</pre>
</div>
<div class="org-src-container">
<pre class="src src-julia">2.23606797749979
</pre>
</div>

<p>
See: <a href="#org1420c88">struct Point</a>
</p>
</blockquote>
<p>
<a href="minimal_example/Foo.jl#org73ccc2c">Foo.jl:35</a>
</p>

<p>
you see that the <code>Point</code> structure is included to make the
<span class="underline">struct_Point</span> link active.
</p>
</div>
</div>

<div id="outline-container-org6a5007c" class="outline-4">
<h4 id="org6a5007c"><span class="section-number-4">2.1.4</span> <code>link_prefix</code></h4>
<div class="outline-text-4" id="text-2-1-4">
<p>
You can create link from your OrgMode document to Julia documented
items that have defined a "L:link_target". However like these items
can be extracted at several places in your OrgMode document you need
to define a prefix to avoid multiple targets with the same name.
</p>

<p>
For instance, chose a prefix, here "my_prefix" and use:
</p>
<div class="org-src-container">
<pre class="src src-julia">print_org_doc(documented_items,...,link_prefix=<span style="color: #8b2252;">"my_prefix_"</span>)
</pre>
</div>
<p>
then you can create a regular OrgMode link to this item using
​ <b>[​[my_prefix_link_target][some_text]]</b>.
</p>
</div>
</div>


<div id="outline-container-orgdf721a0" class="outline-4">
<h4 id="orgdf721a0"><span class="section-number-4">2.1.5</span> <code>case_sensitive</code></h4>
<div class="outline-text-4" id="text-2-1-5">
<p>
When set to true, generates an index as follows:
</p>
<pre class="example">
[A] ..., [B] ...,[a] ..., [b] ...,
</pre>

<p>
When set to false, do not split upper/lower cases and group all A,a;B,b together:
</p>
<pre class="example">
[A] ..., [B] ...
</pre>
</div>
</div>

<div id="outline-container-orgb8a5683" class="outline-4">
<h4 id="orgb8a5683"><span class="section-number-4">2.1.6</span> <code>boxingModule</code></h4>
<div class="outline-text-4" id="text-2-1-6">
<p>
Comments starting with "#!" are executed in a boxed environment
</p>
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #a020f0;">module</span> MyBoxing
<span style="color: #a020f0;">using</span> RequiredPackage_1,RequiredPackage_2,...
<span style="color: #a020f0;">end</span> 
</pre>
</div>

<div class="org-src-container">
<pre class="src src-julia"><span style="color: #a020f0;">using</span> MyBoxing

<span style="color: #b22222;"># </span><span style="color: #b22222;">execute "#!" statements here</span>
</pre>
</div>

<p>
This boxing is defined by the <a href="#orgb7e8da9">initialize_boxing_module(&#x2026;)</a> function:
</p>

<div class="org-src-container">
<pre class="src src-julia">initialize_boxing_module(boxingModule=<span style="color: #8b2252;">"MyBoxing"</span>,
                         usedModules=[<span style="color: #8b2252;">"RequiredPackage_1"</span>,<span style="color: #8b2252;">"RequiredPackage_2"</span>,...])
</pre>
</div>

<p>
This <code>boxingModule</code> option allows you to chose your boxing environment:
</p>
<div class="org-src-container">
<pre class="src src-julia">print_org_doc(documented_items,boxingModule=<span style="color: #8b2252;">"MyBoxing"</span>,...)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2f0d971" class="outline-3">
<h3 id="org2f0d971"><span class="section-number-3">2.2</span> Error reporting</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Error reporting is performed as OrgMode comment. For instance if you execute:
</p>
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #b22222;">#</span><span style="color: #b22222;">+BEGIN_SRC julia :results output drawer :eval no-export :exports results </span>
documented_items=create_documented_item_array(<span style="color: #8b2252;">"minimal_example/Foo.jl"</span>);
print_org_doc(documented_items,tag=<span style="color: #8b2252;">"Method"</span>,header_level=-1)
<span style="color: #b22222;">#</span><span style="color: #b22222;">+END_SRC</span>
</pre>
</div>


<p>
you will get:
</p>
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #b22222;">#</span><span style="color: #b22222;">+RESULTS:</span>
<span style="color: #483d8b;">:RESULTS</span>:
<span style="color: #b22222;"># </span><span style="color: #b22222;">=WARNING:= Link target ("Point_struct", "") not found</span>
...
<span style="color: #483d8b;">:END</span>:
</pre>
</div>
</div>
</div>
<div id="outline-container-org6715593" class="outline-3">
<h3 id="org6715593"><span class="section-number-3">2.3</span> Compatibility with docstring / documenter.jl</h3>
<div class="outline-text-3" id="text-2-3">
<p>
You can still use something like:
</p>
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #8b2252;">"""</span>
<span style="color: #8b2252;">    foo()</span>

<span style="color: #8b2252;">foo function ...</span>
<span style="color: #8b2252;">"""</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">+Tags...</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">foo function ...</span>
<span style="color: #0000ff;">foo</span>() = ...
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8cf3a45" class="outline-2">
<h2 id="org8cf3a45"><a id="ID-c9053a86-dea5-4bc2-a883-92a1bfde20ba"></a><span class="section-number-2">3</span> API</h2>
<div class="outline-text-2" id="text-3">
<p>
The API is simple, with very few functions:
</p>

<p>

</p>

<p>
<a id="orgd4bc0c0"></a> <b>Index:</b> <b>[c]</b> <a href="#org45d9ddf">create_documented_item_array</a>, <a href="#orged8b40d">create_documented_item_array_dir</a> <b>[i]</b> <a href="#org280cefc">initialize_boxing_module</a> <b>[p]</b> <a href="#orgedddfa4">print_org_doc</a> 
</p>
<ul class="org-ul">
<li><b><code>create_documented_item_array</code></b>  <a id="org45d9ddf"></a> <a id="org04e479d"></a></li>
</ul>
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #a020f0;">function</span> <span style="color: #0000ff;">create_documented_item_array</span>(filename::<span style="color: #228b22;">String</span>)::<span style="color: #228b22;">Array</span>{Documented_Item,1}

    <span style="color: #a020f0;">if</span> VERSION &lt; v<span style="color: #8b2252;">"0.7"</span>
        code = readstring(filename)
    <span style="color: #a020f0;">else</span>
        code = read(filename,<span style="color: #228b22;">String</span>)
    <span style="color: #a020f0;">end</span>
    
    tok=tokenized(code)

    n=length(tok)
    idx=1
    toReturn=<span style="color: #228b22;">Array</span>{Documented_Item,1}(0)
    
    <span style="color: #a020f0;">while</span> idx&lt;=n
        extracted_tag = find_tag(tok,idx)

        <span style="color: #b22222;"># </span><span style="color: #b22222;">no more tag?</span>
        <span style="color: #b22222;"># </span>
        <span style="color: #a020f0;">if</span> extracted_tag==<span style="color: #008b8b;">nothing</span>
            <span style="color: #a020f0;">break</span>
        <span style="color: #a020f0;">end</span> 

        <span style="color: #a020f0;">try</span>
            di=create_documented_item(extracted_tag,filename=filename)
            push!(toReturn,di)
        <span style="color: #a020f0;">catch</span> msg
            warning_message(<span style="color: #8b2252;">"cannot interpret $(filename):$(line(extracted_tag)) $(msg)"</span>)
        <span style="color: #a020f0;">end</span>

        <span style="color: #b22222;"># </span><span style="color: #b22222;">important to rescan after tag (and not after code):</span>
        <span style="color: #b22222;"># </span><span style="color: #b22222;">tag1</span>
        <span style="color: #b22222;"># </span><span style="color: #b22222;">struct foo</span>
        <span style="color: #b22222;">#   </span><span style="color: #b22222;">tag2 &lt;- catch me!</span>
        <span style="color: #b22222;">#   </span><span style="color: #b22222;">constructor</span>
        <span style="color: #b22222;"># </span><span style="color: #b22222;">end </span>
        idx=skip(extracted_tag)
    
</pre>
</div>
<blockquote>
<p>
Reads a Julia code file and returns an array of documented items.
</p>
</blockquote>
<p>
<a href="../src/documented_item.jl#orgdad1670">documented_item.jl:97</a>, <a href="#orgd4bc0c0">back to index</a>
</p>

<div class="org-src-container">
<pre class="src src-julia"><span style="color: #a020f0;">function</span> <span style="color: #0000ff;">create_documented_item_array</span>(filename_list::<span style="color: #228b22;">Array</span>{<span style="color: #228b22;">String</span>,1})::<span style="color: #228b22;">Array</span>{Documented_Item,1}
    docItem_array = <span style="color: #228b22;">Array</span>{Documented_Item,1}()
    
    <span style="color: #a020f0;">for</span> file <span style="color: #a020f0;">in</span> filename_list
        docItem_array = vcat(docItem_array,create_documented_item_array(file))
    <span style="color: #a020f0;">end</span> 

    <span style="color: #a020f0;">return</span> docItem_array

</pre>
</div>
<blockquote>
<p>
Reads an array of Julia code files and returns an array of
documented items.
</p>

<p>
<b>Usage example:</b> 
</p>
<div class="org-src-container">
<pre class="src src-julia">create_documented_item_array([<span style="color: #8b2252;">"file1"</span>,<span style="color: #8b2252;">"file2"</span>,...])
</pre>
</div>

<p>
<b>Note:</b> instead of a list of files you can also specify a directory,
see <a href="#orga7773fa">create_documented_item_array_dir(&#x2026;)</a>
</p>
</blockquote>
<p>
<a href="../src/documented_item.jl#org3f25e68">documented_item.jl:142</a>, <a href="#orgd4bc0c0">back to index</a>
</p>
<ul class="org-ul">
<li><b><code>create_documented_item_array_dir</code></b>  <a id="orged8b40d"></a> <a id="orga7773fa"></a></li>
</ul>
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #a020f0;">function</span> <span style="color: #0000ff;">create_documented_item_array_dir</span>(dirname::<span style="color: #228b22;">AbstractString</span>)
    <span style="color: #b22222;"># </span><span style="color: #b22222;">expanded_dirname=expanduser(dirname)</span>
    <span style="color: #b22222;"># </span><span style="color: #b22222;">@assert isdir(expanded_dirname)</span>
    <span style="color: #b22222;"># </span><span style="color: #b22222;"># tips from https://stackoverflow.com/questions/20484581/search-for-files-in-a-folder</span>
    <span style="color: #b22222;"># </span><span style="color: #b22222;">files=filter(x-&gt;contains(x,r".jl$"), readdir(expanded_dirname))</span>
    <span style="color: #b22222;"># </span><span style="color: #b22222;">map!(x-&gt;expanded_dirname*x,files,files)</span>

    file_names=scan_directory_return_file_names(dirname)
    files=filter_julia_source_code_file_names(file_names)
    <span style="color: #a020f0;">return</span> create_documented_item_array(files)

</pre>
</div>
<blockquote>
<p>
Reads all *.jl files in a directory and returns an array of
documented items.
</p>
</blockquote>
<p>
<a href="../src/documented_item.jl#orgb325362">documented_item.jl:189</a>, <a href="#orgd4bc0c0">back to index</a>
</p>
<ul class="org-ul">
<li><b><code>initialize_boxing_module</code></b>  <a id="org280cefc"></a> <a id="orgb7e8da9"></a></li>
</ul>
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #a020f0;">function</span> <span style="color: #0000ff;">initialize_boxing_module</span>(;
                                  boxingModule::<span style="color: #228b22;">String</span>=<span style="color: #8b2252;">"BoxingModule"</span>,
                                  usedModules::<span style="color: #228b22;">Vector</span>{<span style="color: #228b22;">String</span>}=<span style="color: #228b22;">String</span>[],
                                  force::<span style="color: #228b22;">Bool</span>=<span style="color: #008b8b;">false</span>)::<span style="color: #228b22;">Nothing</span>
    <span style="color: #b22222;"># </span><span style="color: #b22222;">Common errors</span>
    <span style="color: #483d8b;">@assert</span> boxingModule!=<span style="color: #8b2252;">""</span>
    <span style="color: #483d8b;">@assert</span> usedModules!=<span style="color: #228b22;">String</span>[<span style="color: #8b2252;">""</span>]
    
    <span style="color: #b22222;"># </span><span style="color: #b22222;">initialize a module (for boxing)</span>
    module_exists = isdefined(J4Org,<span style="color: #228b22;">Symbol</span>(boxingModule))

    <span style="color: #a020f0;">if</span> force||(!module_exists)
        <span style="color: #a020f0;">if</span> length(usedModules)&gt;0
            usedModules_asString = <span style="color: #8b2252;">"using $(foldr((x,y)-&gt;x*"</span>, <span style="color: #8b2252;">"*y,"",usedModules)[1:end-2]) "</span>
        <span style="color: #a020f0;">else</span>
            usedModules_asString = <span style="color: #8b2252;">""</span>
        <span style="color: #a020f0;">end</span>
        <span style="color: #a020f0;">if</span> VERSION &lt; v<span style="color: #8b2252;">"0.7.0-alpha"</span>
            eval(parse(<span style="color: #8b2252;">"module $(boxingModule) $(usedModules_asString) end"</span>))
        <span style="color: #a020f0;">else</span>
            Meta.eval(parse(<span style="color: #8b2252;">"module $(boxingModule) $(usedModules_asString) end"</span>))
        <span style="color: #a020f0;">end</span>
    <span style="color: #a020f0;">else</span>
        <span style="color: #b22222;"># </span><span style="color: #b22222;">force=false &amp;&amp; module_exists = true</span>
        <span style="color: #b22222;"># </span><span style="color: #b22222;">-&gt; nothing is done... interpreted as an error if usedModules if different</span>
        <span style="color: #b22222;"># </span><span style="color: #b22222;">--&gt; however for the moment we do not know how to get module "used" module_name</span>
        <span style="color: #b22222;">#     </span><span style="color: #b22222;">thus we trigger an error if usedModules is not empty </span>
        <span style="color: #483d8b;">@assert</span> isempty(usedModules) <span style="color: #8b2252;">"Tried to define an already existing module, maybe use the force=true kwarg"</span>
    <span style="color: #a020f0;">end</span>
    <span style="color: #008b8b;">nothing</span>

</pre>
</div>
<blockquote>
<p>
Initialize a boxing module. This module is used to run Julia comment
code snippet (tagged by "#!" or by "# !")
</p>

<p>
<b>Example:</b>
</p>
<div class="org-src-container">
<pre class="src src-julia">initialize_boxing_module(boxingModule=<span style="color: #8b2252;">"MyBoxing"</span>,
                         usedModules=[<span style="color: #8b2252;">"RequiredPackage_1"</span>,
                                      <span style="color: #8b2252;">"RequiredPackage_2"</span>,...])
</pre>
</div>

<p>
creates
</p>

<div class="org-src-container">
<pre class="src src-julia"><span style="color: #a020f0;">module</span> MyBoxing
<span style="color: #a020f0;">using</span> RequiredPackage_1,RequiredPackage_2,...
<span style="color: #a020f0;">end</span> 
</pre>
</div>

<p>
and future "# !" statements are executed after using MyBoxing:
</p>
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #a020f0;">using</span> MyBoxing
<span style="color: #b22222;"># </span><span style="color: #b22222;">!statements</span>
</pre>
</div>
</blockquote>
<p>
<a href="../src/evaluate.jl#org0aee0b3">evaluate.jl:18</a>, <a href="#orgd4bc0c0">back to index</a>
</p>
<ul class="org-ul">
<li><b><code>print_org_doc</code></b>  <a id="orgedddfa4"></a> <a id="org62c826a"></a></li>
</ul>
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #a020f0;">function</span> <span style="color: #0000ff;">print_org_doc</span>(di_array::<span style="color: #228b22;">Array</span>{Documented_Item,1};
                       tag::<span style="color: #228b22;">Union</span>{<span style="color: #228b22;">String</span>,<span style="color: #228b22;">Array</span>{<span style="color: #228b22;">String</span>,1}}=<span style="color: #8b2252;">""</span>,
                       tag_to_ignore::<span style="color: #228b22;">Union</span>{<span style="color: #228b22;">String</span>,<span style="color: #228b22;">Array</span>{<span style="color: #228b22;">String</span>,1}}=<span style="color: #8b2252;">""</span>,
                       identifier::<span style="color: #228b22;">String</span>=<span style="color: #8b2252;">""</span>,
                       header_level::<span style="color: #228b22;">Int</span>=0,
                       link_prefix::<span style="color: #228b22;">String</span>=randstring(),
                       complete_link::<span style="color: #228b22;">Bool</span>=<span style="color: #008b8b;">false</span>,
                       case_sensitive::<span style="color: #228b22;">Bool</span>=<span style="color: #008b8b;">true</span>,
                       boxingModule::<span style="color: #228b22;">String</span>=<span style="color: #8b2252;">"BoxingModule"</span>,
                       with_body::<span style="color: #228b22;">Bool</span>=<span style="color: #008b8b;">false</span>)
    print(org_string_documented_item_array(di_array,
                                           tag=tag,
                                           tag_to_ignore=tag_to_ignore,
                                           identifier=identifier,
                                           header_level=header_level,
                                           link_prefix=link_prefix,
                                           complete_link=complete_link,
                                           case_sensitive=case_sensitive,
                                           boxingModule=boxingModule,
                                           with_body=with_body))

</pre>
</div>
<blockquote>
<p>
Prints generated documentation to be exported by OrgMode, this is the main function of the <code>J4Org</code> package.
</p>

<p>
<b>Org-Mode Usage example:</b>
</p>
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #b22222;">#</span><span style="color: #b22222;">+BEGIN_SRC julia :results output drawer :eval no-export :exports results</span>
documented_items = create_documented_item_array_dir(<span style="color: #8b2252;">"~/GitLab/MyPackage.jl/src/"</span>);
print_org_doc(documented_items,tag=<span style="color: #8b2252;">"API"</span>,header_level=0)
<span style="color: #b22222;">#</span><span style="color: #b22222;">+END_SRC</span>
</pre>
</div>

<p>
<b>Arguments:</b>
</p>
<ul class="org-ul">
<li><code>tag</code>: tags to collect when generating the documentation</li>
<li><code>tag_to_ignore</code>: tags to ignore when generating the documentation</li>
<li><code>identifier</code>: generates documentation for this "identifier". Can be a function name, a structure name, etc…</li>
<li><code>link_prefix</code>: allows to add a prefix to extra link (#+tag L=extra_link). this is can be useful to avoid link name conflict when performing local doc extraction.</li>
<li><code>complete_link</code>: if true, try to fix link without target by adding extra items</li>
<li><code>case_sensitive</code>: case sensitive index.</li>
<li><code>boxingModule</code>: specifies the context in which "#!" code will be executed. See <a href="#orgb7e8da9">initialize_boxing_module(&#x2026;)</a> for details.</li>
<li><code>with_body::Bool</code>: if true include code body</li>
</ul>
</blockquote>
<p>
<a href="../src/main.jl#org32618f0">main.jl:359</a>, <a href="#orgd4bc0c0">back to index</a>
</p>
</div>
</div>


<div id="outline-container-org9a6644d" class="outline-2">
<h2 id="org9a6644d"><span class="section-number-2">4</span> Unit tests</h2>
<div class="outline-text-2" id="text-4">
<pre class="example">
Test Summary: | Pass  Total
J4Org         |  126    126

</pre>
</div>
</div>

<div id="outline-container-orgf2cdc6e" class="outline-2">
<h2 id="orgf2cdc6e"><span class="section-number-2">5</span> Code/Design tips</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-org0478ddd" class="outline-3">
<h3 id="org0478ddd"><span class="section-number-3">5.1</span> PDF export &amp; phantomsection</h3>
<div class="outline-text-3" id="text-5-1">
<p>
To be able to use links everywhere we use the
<code>"@@latex:\\phantomsection@@"</code> tricks. See
<a href="https://tex.stackexchange.com/questions/44088/when-do-i-need-to-invoke-phantomsection">when-do-i-need-to-invoke-phantomsection</a> for instance.
</p>
</div>
</div>

<div id="outline-container-org6eb6c91" class="outline-3">
<h3 id="org6eb6c91"><span class="section-number-3">5.2</span> HTML export with background</h3>
<div class="outline-text-3" id="text-5-2">
<p>
See <a href="https://github.com/JuliaEditorSupport/julia-emacs/issues/53">https://github.com/JuliaEditorSupport/julia-emacs/issues/53</a>
</p>
</div>
</div>

<div id="outline-container-orgd7bc743" class="outline-3">
<h3 id="orgd7bc743"><span class="section-number-3">5.3</span> Steps to add a new item</h3>
<div class="outline-text-3" id="text-5-3">
<p>
We use <code>enum</code> as example
</p>
</div>
<div id="outline-container-org6edb9f4" class="outline-4">
<h4 id="org6edb9f4"><span class="section-number-4">5.3.1</span> <code>tokenizer.jl</code> file</h4>
<div class="outline-text-4" id="text-5-3-1">
<p>
Add: <code>is_enum()</code> and <code>skip_enum_block()</code> functions
</p>
</div>
<ol class="org-ol">
<li><a id="org9a81248"></a>tests<br />
<div class="outline-text-5" id="text-5-3-1-1">
<p>
Add 
</p>
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #a020f0;">import</span> J4Org: is_enum

<span style="color: #483d8b;">@testset</span> <span style="color: #8b2252;">"is_enum"</span> <span style="color: #a020f0;">begin</span>
    t=tokenized(<span style="color: #8b2252;">"@enum Alpha A B"</span>)
    <span style="color: #483d8b;">@test</span> is_enum(t,1)
<span style="color: #a020f0;">end</span>;

</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-orgf90ab09" class="outline-4">
<h4 id="orgf90ab09"><span class="section-number-4">5.3.2</span> <code>extract.jl</code> file</h4>
<div class="outline-text-4" id="text-5-3-2">
<p>
Add: <code>struct Extracted_Enum</code> and <code>extract_enum()</code> function.
</p>

<p>
Then complete <code>extract_code()</code> to take into account the extracted <code>Documented_Item</code>.
</p>
</div>
<ol class="org-ol">
<li><a id="orgc96dd75"></a>tests<br />
<div class="outline-text-5" id="text-5-3-2-1">
<p>
Create a basic file like: <code>test/code_example/enum.jl</code>
</p>
<pre class="example">
#+Tag L:target 
# This is an enum example [[target][]]
@enum Alpha A  B=1 C
</pre>
<p>
Add 
</p>
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #a020f0;">import</span> J4Org: extract_enum

<span style="color: #483d8b;">@testset</span> <span style="color: #8b2252;">"enum"</span> <span style="color: #a020f0;">begin</span>
    filename=<span style="color: #8b2252;">"$(dirname(@__FILE__))/code_examples/enum.jl"</span>
    t=tokenized(readstring(filename))
    r = extract_enum(t,1)
    <span style="color: #483d8b;">@test</span> r!=<span style="color: #008b8b;">nothing</span>
    <span style="color: #483d8b;">@test</span> raw_string(r) == <span style="color: #8b2252;">"@enum Alpha A  B=1 C"</span>
    <span style="color: #483d8b;">@test</span> identifier(r) == <span style="color: #8b2252;">"Alpha"</span>
<span style="color: #a020f0;">end</span>;
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org63620d8" class="outline-4">
<h4 id="org63620d8"><span class="section-number-4">5.3.3</span> <code>link.jl</code> file</h4>
<div class="outline-text-4" id="text-5-3-3">
<p>
This is not mandatory, however if you want to magnify link to enum,
you can update the <code>create_link_readable_part()</code> function.
</p>
</div>
<ol class="org-ol">
<li><a id="org02547a0"></a>tests<br />
<div class="outline-text-5" id="text-5-3-3-1">
<p>
Link magnification is checked in <a href="#org903f4fa"><code>documented_item.jl</code></a>
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-org903f4fa" class="outline-4">
<h4 id="org903f4fa"><a id="ID-b84e7269-ae02-4c64-b180-6b50d6f8aa89"></a><span class="section-number-4">5.3.4</span> <code>documented_item.jl</code></h4>
<div class="outline-text-4" id="text-5-3-4">
<p>
Add the <code>is_documented_enum_type()</code> function.
</p>
</div>
<ol class="org-ol">
<li><a id="org436fb9f"></a>tests<br />
<div class="outline-text-5" id="text-5-3-4-1">
<p>
Add 
</p>
<div class="org-src-container">
<pre class="src src-julia"><span style="color: #483d8b;">@testset</span> <span style="color: #8b2252;">"enum"</span> <span style="color: #a020f0;">begin</span>
    filename=<span style="color: #8b2252;">"$(dirname(@__FILE__))/code_examples/enum.jl"</span>
    t=tokenized(readstring(filename))
    r=find_tag(t,1)
    di=create_documented_item(t,tag_idx(r),filename=filename)
    <span style="color: #483d8b;">@test</span> org_string_comment(di,[di],[di],<span style="color: #8b2252;">""</span>,<span style="color: #8b2252;">"BoxingModule"</span>) == 
      <span style="color: #8b2252;">"#+BEGIN_QUOTE\nThis is an enum example [[target][@enum Alpha]]\n#+END_QUOTE\n"</span>
    <span style="color: #483d8b;">@test</span> org_string_code(di) == 
     <span style="color: #8b2252;">"#+BEGIN_SRC julia :eval never :exports code\n@enum Alpha A  B=1 C\n#+END_SRC\n"</span>
 <span style="color: #a020f0;">end</span>;
</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Vincent Picaud</p>
<p class="date">Created: 2018-07-16 Mon 18:43</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
